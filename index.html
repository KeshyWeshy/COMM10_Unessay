<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RATING PENDING</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #e94560;
            --secondary: #0f3460;
            --accent: #d53e07;
            --dark: #1a1a2e;
            --darker: #16213e;
            --light: #f5f5f5;
            --wood: #8B4513;
            --wood-light: #A0522D;
            --wood-dark: #654321;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark) 0%, var(--darker) 100%);
            color: var(--light);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            position: relative;
        }
        
        .content {
            padding: 30px;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .scene-image {
            width: 100%;
            height: 400px; /* Fixed height for 3:2 aspect ratio */
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }
        
        .scene-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .story-text {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 30px;
            text-align: center;
            min-height: 120px;
            border-left: 3px solid var(--accent);
            padding-left: 15px;
            text-align: left;
            font-style: italic;
        }
        
        .typing {
            overflow: hidden;
            border-right: 2px solid var(--accent);
            white-space: nowrap;
            animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--accent); }
        }
        
        .choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .choice-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            opacity: 0;
            animation: fadeInUp 0.5s ease forwards;
        }
        
        .choice-btn:nth-child(1) { animation-delay: 0.2s; }
        .choice-btn:nth-child(2) { animation-delay: 0.4s; }
        .choice-btn:nth-child(3) { animation-delay: 0.6s; }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .choice-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }
        
        .desk-interface {
            background: var(--darker);
            padding: 30px;
            border-radius: 10px;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.3);
            position: relative;
            min-height: 400px;
        }
        
        .folder-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .folder {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border-radius: 8px;
            padding: 25px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .folder::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 20px;
            right: 20px;
            height: 20px;
            background: #e74c3c;
            border-radius: 5px 5px 0 0;
            transform: perspective(50px) rotateX(20deg);
        }
        
        .folder:hover {
            transform: translateY(-10px) rotate(-2deg);
            border-color: var(--accent);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }
        
        .folder h3 {
            margin-bottom: 10px;
            color: var(--accent);
            font-size: 20px;
        }
        
        .folder p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .title-screen, .intro-screen, .theoretical-screen, .credits-screen, .final-message-screen {
            text-align: center;
            padding: 40px 30px;
        }
        
        .title-screen h1 {
            font-size: 48px;
            margin-bottom: 20px;
            color: var(--accent);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            animation: titleGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes titleGlow {
            from { text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); }
            to { text-shadow: 2px 2px 20px var(--accent), 2px 2px 30px var(--accent); }
        }
        
        .title-screen p {
            font-size: 20px;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        
        .intro-screen h2, .theoretical-screen h2, .credits-screen h2, .final-message-screen h2 {
            font-size: 32px;
            margin-bottom: 20px;
            color: var(--accent);
        }
        
        .intro-screen p, .theoretical-screen p, .credits-screen p, .final-message-screen p {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .ending-screen {
            text-align: center;
            padding: 30px;
        }
        
        .ending-title {
            font-size: 28px;
            margin-bottom: 20px;
            color: var(--accent);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .ending-description {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .consequences {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            border-left: 4px solid var(--primary);
        }
        
        .consequences h3 {
            color: var(--accent);
            margin-bottom: 10px;
        }
        
        .next-btn, .start-btn, .continue-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            opacity: 0;
            animation: fadeIn 1s ease 1s forwards;
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .next-btn:hover, .start-btn:hover, .continue-btn:hover {
            background: var(--accent);
            transform: scale(1.05);
        }
        
        .restart-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            animation: fadeIn 1s ease 1s forwards;
        }
        
        .restart-btn:hover {
            background: var(--accent);
            transform: scale(1.05);
        }
        
        .skip-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            z-index: 100;
        }
        
        /* Mobile-specific styles */
        @media (max-width: 768px) {
            .container {
                border-radius: 10px;
            }
            
            .content {
                padding: 20px;
            }
            
            .scene-image {
                height: 300px; /* Adjusted for mobile */
            }
            
            .story-text {
                font-size: 16px;
                margin-bottom: 20px;
            }
            
            .choice-btn {
                padding: 12px;
                font-size: 15px;
            }
            
            .folder-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .title-screen h1 {
                font-size: 36px;
            }
            
            .intro-screen h2, .theoretical-screen h2, .credits-screen h2, .final-message-screen h2 {
                font-size: 28px;
            }
            
            .ending-title {
                font-size: 24px;
            }
            
            .ending-description {
                font-size: 16px;
            }
        }
        
        /* Small mobile devices */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                border-radius: 8px;
            }
            
            .scene-image {
                height: 200px; /* Adjusted for small mobile */
            }
            
            .story-text {
                font-size: 15px;
            }
            
            .choice-btn {
                padding: 10px;
                font-size: 14px;
            }
            
            .title-screen h1 {
                font-size: 28px;
            }
            
            .intro-screen h2, .theoretical-screen h2, .credits-screen h2, .final-message-screen h2 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="content" id="content">
            <!-- Content will be dynamically updated by JavaScript -->
        </div>
    </div>

    <script>
        // Image paths (using placeholder images - replace with actual images)
        const images = {
            startingPoint: "https://images.unsplash.com/photo-1556761175-5973dc0f32e7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
            dreamboi: {
                question1: "https://i.imgur.com/Jfv4TGi.jpeg",
                question2: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                question3: "https://images.unsplash.com/photo-1586899028174-e09c813d2e43?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                endingA: "https://images.unsplash.com/photo-1574267432553-4b4628081c31?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                endingB: "https://images.unsplash.com/photo-1489599809505-f2d4c65055d1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                endingC: "https://images.unsplash.com/photo-1495465798131-8df9440b8d0a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80"
            },
            myFatherMyself: {
                question1: "https://images.unsplash.com/photo-1511632765486-a01980e01a18?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                question2: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                question3: "https://images.unsplash.com/photo-1574267432553-4b4628081c31?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                endingA: "https://images.unsplash.com/photo-1489599809505-f2d4c65055d1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                endingB: "https://images.unsplash.com/photo-1495465798131-8df9440b8d0a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                endingC: "https://images.unsplash.com/photo-1574267432553-4b4628081c31?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80"
            },
            dearSatan: {
                question1: "https://images.unsplash.com/photo-1579546929662-711aa81148cf?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                question2: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                question3: "https://images.unsplash.com/photo-1574267432553-4b4628081c31?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                endingA: "https://images.unsplash.com/photo-1489599809505-f2d4c65055d1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                endingB: "https://images.unsplash.com/photo-1495465798131-8df9440b8d0a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",
                endingC: "https://images.unsplash.com/photo-1574267432553-4b4628081c31?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80"
            }
        };

        // Story data structure with all three case files
        const storyData = {
            paths: {
                dreamboi: {
                    title: "Dreamboi",
                    description: "Case File #001: A trans woman's intimate journey",
                    questions: [
                        {
                            text: "Diwa is a trans woman. She's not just longing for love; she craves desire itself. In the shadows, she listens to an underground anonymous audio porn actor… until she realizes he's more than just a voice. A member whispers, 'Is this even cinema anymore?' The case file's folder is thick with filed complaints. You flip through the screening notes.",
                            image: "dreamboi.question1"
                        },
                        {
                            text: "The Bureaucrat board member sighs. 'There's nothing valuable about this film. It's just pornography.'",
                            image: "dreamboi.question2"
                        },
                        {
                            text: "A 'careful' moment of deliberation passes. Let's stamp our votes.",
                            image: "dreamboi.question3"
                        }
                    ],
                    choices: [
                        [
                            { text: "This is too explicit.", value: "A" },
                            { text: "This is honest. Erotic, but human.", value: "B" },
                            { text: "I don't know enough to have an opinion, let's just follow protocol.", value: "C" }
                        ],
                        [
                            { text: "There's a difference between intimacy and provocation. This is a danger to the public.", value: "A" },
                            { text: "You strongly object, 'It's not pornography. It's perspective. Trans desire is as valid as heterosexual desire.' Silence. A cough. The Conservative board member starts highlighting your sentence in red.", value: "B" },
                            { text: "You say nothing. You check the handbook.", value: "C" }
                        ],
                        [
                            { text: "Vote to X Rating", value: "A" },
                            { text: "Vote to R-16", value: "B" },
                            { text: "Ask for 'revisions' from filmmaker", value: "C" }
                        ]
                    ],
                    endings: {
                        A: {
                            title: "BANNED",
                            description: "The stamp hits the paper. X. Banned. The director is notified through a carefully worded email.",
                            consequences: "Conservative page: 'PROTECT OUR YOUTH'. Film Twitter: 'So heterosexual sex is fine but not trans intimacy?' The news goes viral and the film community cries out in protest. A contestation is submitted. Due to extreme backlash, it is re-rated to R-16. The film survives, but only in late night viewings, in two independent cinemas, for people who already agree with you. Visibility is allowed, but strategically limited. Not erasure. Just controlled exposure.",
                            image: "dreamboi.endingA"
                        },
                        B: {
                            title: "RELEASED",
                            description: "The Bureaucrat gasps at your vote. The vote is 3-1. The movie is stamped for restricted release.",
                            consequences: "The film survives, but only in late night viewings, in two independent cinemas, for people who already agree with you. Visibility is allowed, but strategically limited. Not erasure. Just controlled exposure.",
                            image: "dreamboi.endingB"
                        },
                        C: {
                            title: "REVISED",
                            description: "The board acknowledges the artistic ambition of Dreamboi. However, some elements will lead toward ideological confusion. In the spirit of creative compromise, the film may be screened under the following conditions: Fade-to-black on all trans intimacy. One line where the character affirms 'traditional Filipino values'.",
                            consequences: "You granted visibility, but with a leash. The system didn't break; it just policed itself more gently. You did not fully liberate Diwa. But you did let her be seen.",
                            image: "dreamboi.endingC"
                        }
                    }
                },
                myFatherMyself: {
                    title: "My Father, Myself",
                    description: "Case File #002: A complex story of love and trauma",
                    questions: [
                        {
                            text: "A disturbing incestuous narrative where a closeted gay man adopts his dead lover's son, and complexly falls in love with him. Sexual abuse. Trauma. Queerness coded as decay. Yet somehow... 'A cautionary tale,' one member says.",
                            image: "myFatherMyself.question1"
                        },
                        {
                            text: "The Conservative board member delights, 'This is the kind of representation we need.'",
                            image: "myFatherMyself.question2"
                        },
                        {
                            text: "A 'careful' moment of deliberation passes. Let's stamp our votes.",
                            image: "myFatherMyself.question3"
                        }
                    ],
                    choices: [
                        [
                            { text: "It's a real story, it's meant to warn and reflect.", value: "A" },
                            { text: "This is exploitative and reinforces harmful stereotypes.", value: "B" },
                            { text: "We are just neutral arbiters.", value: "C" }
                        ],
                        [
                            { text: "Let them see the consequences. People need to see this as it's honest.", value: "A" },
                            { text: "You strongly object, 'This portrays queerness as moral collapse. They're using queer pain as a spectacle.'", value: "B" },
                            { text: "You choose the safety of procedure. The most political choice disguised as none.", value: "C" }
                        ],
                        [
                            { text: "Vote to R-16", value: "A" },
                            { text: "Vote to X Rating", value: "B" },
                            { text: "Vote to R-16", value: "C" }
                        ]
                    ],
                    endings: {
                        A: {
                            title: "RESTRICTED RELEASE",
                            description: "The film gets restricted release. They justify: the film is mature, intense, not for the young.",
                            consequences: "Some see this as truth-telling; others, as a sensational exhibition. A queer story can be shown, but only when it confirms dominant ideology.",
                            image: "myFatherMyself.endingA"
                        },
                        B: {
                            title: "OUTVOTED",
                            description: "You vote to ban it, but you are outvoted by the others. The film gets restricted release.",
                            consequences: "They justify: the film is mature, intense, not for the young. Some see this as truth-telling; others, as a sensational exhibition. A queer story can be shown, but only when it confirms dominant ideology.",
                            image: "myFatherMyself.endingB"
                        },
                        C: {
                            title: "PROCEDURAL RELEASE",
                            description: "The film gets restricted release. They justify: the film is mature, intense, not for the young.",
                            consequences: "Some see this as truth-telling; others, as a sensational exhibition. A queer story can be shown, but only when it confirms dominant ideology.",
                            image: "myFatherMyself.endingC"
                        }
                    }
                },
                dearSatan: {
                    title: "Dear Satan",
                    description: "Case File #003: A controversial Christmas story",
                    questions: [
                        {
                            text: "A 'Christmas' film like no other. A little girl named Chichi writes a letter to Santa. But she misspells his name, and it lands in Satan's mailbox. Satan (yes, Satan) shows up, not to ruin things, but to change. To give gifts. To be... kind. Somewhere, someone is very offended. Letters have already been filed.",
                            image: "dearSatan.question1"
                        },
                        {
                            text: "The Progressive member cries out, 'Isn't faith about transformation? Why can't evil be invited to reform?'",
                            image: "dearSatan.question2"
                        },
                        {
                            text: "A 'careful' moment of deliberation passes. Let's stamp our votes.",
                            image: "dearSatan.question3"
                        }
                    ],
                    choices: [
                        [
                            { text: "This is blasphemy!", value: "A" },
                            { text: "Redemption stories are interesting.", value: "B" },
                            { text: "Let's keep following procedure and evaluate the content.", value: "C" }
                        ],
                        [
                            { text: "Satan? Good? That's not how religion works. We can't portray evil as redeemable.", value: "A" },
                            { text: "That's actually a compelling plot, faith transforming darkness. Maybe we should let the audience decide what kind of evil they fear.", value: "B" },
                            { text: "Let's refer to MTRCB guidelines.", value: "C" }
                        ],
                        [
                            { text: "Vote to X Rating", value: "A" },
                            { text: "Vote to R-16", value: "B" },
                            { text: "Ask for 'Revisions' from Filmmaker", value: "C" }
                        ]
                    ],
                    endings: {
                        A: {
                            title: "BANNED",
                            description: "The board slams the stamp. X. Dear Satan is officially banned from theaters.",
                            consequences: "MTRCB Chair states: redemption of Satan is an 'attack on Christian belief.' Church groups: 'Satan will never be good.' Film Twitter: 'What's scarier—the devil or the censors?' Producer note: 'We won't appeal; we'll stream instead.'",
                            image: "dearSatan.endingA"
                        },
                        B: {
                            title: "OUTVOTED",
                            description: "You vote to ban it, but you are outvoted by the others. The board slams the stamp. X. Dear Satan is officially banned from theaters.",
                            consequences: "MTRCB Chair states: redemption of Satan is an 'attack on Christian belief.' Church groups: 'Satan will never be good.' Film Twitter: 'What's scarier—the devil or the censors?' Producer note: 'We won't appeal; we'll stream instead.'",
                            image: "dearSatan.endingB"
                        },
                        C: {
                            title: "REVISED RELEASE",
                            description: "The board reluctantly gives a restricted rating but demands 'contextual framing.' They require: A preface explaining the film is fictional. A 'moral afterword' text at the end about virtue and faith.",
                            consequences: "Congratulations! You let redemption into power, but only because power insisted on rewriting the terms.",
                            image: "dearSatan.endingC"
                        }
                    }
                }
            }
        };

        // Game state
        let gameState = {
            currentPath: null,
            currentQuestion: 0,
            answers: [],
            gameCompleted: false,
            typingSpeed: 30, // milliseconds per character
            skipTyping: false
        };

        // DOM elements
        const contentElement = document.getElementById('content');

        // Initialize the game
        function initGame() {
            showTitleScreen();
        }

        // Show title screen
        function showTitleScreen() {
            let html = `
                <div class="title-screen">
                    <h1>RATING PENDING</h1>
                    <p>A Choose-Your-Own-Censorship Experience</p>
                    <button class="start-btn" onclick="showIntroScreen()">Begin Experience</button>
                </div>
            `;
            contentElement.innerHTML = html;
        }

        // Show intro screen
        function showIntroScreen() {
            let html = `
                <button class="skip-btn" onclick="skipTyping()">Skip</button>
                <div class="scene-image">
                    <img src="${images.startingPoint}" alt="Board Room">
                </div>
                <div class="story-text" id="story-text"></div>
                <button class="continue-btn" onclick="showPathSelection()" style="display: none;" id="continue-btn">Continue to Cases</button>
            `;
            contentElement.innerHTML = html;
            
            const text = "You are a board member of MTRCB. Today's another normal day at work, back in the board room with three film cases to review. You take a look around the other board members with you: The Bureaucrat, the Conservative, and the Progressive. You take a sip of coffee. Which case file should we start with today?";
            typeText(text, document.getElementById('story-text'), () => {
                document.getElementById('continue-btn').style.display = 'block';
            });
        }

        // Show path selection screen
        function showPathSelection() {
            let html = `
                <div class="desk-interface">
                    <div class="story-text">
                        <h2>Case Files</h2>
                        <p>Select a case file to review. Your decisions will shape Philippine cinema.</p>
                    </div>
                    <div class="folder-grid">
            `;
            
            for (const pathKey in storyData.paths) {
                const path = storyData.paths[pathKey];
                html += `
                    <div class="folder" onclick="selectPath('${pathKey}')">
                        <h3>${path.title}</h3>
                        <p>${path.description}</p>
                    </div>
                `;
            }
            
            html += `</div></div>`;
            contentElement.innerHTML = html;
        }

        // Select a path and start the story
        function selectPath(pathKey) {
            gameState.currentPath = pathKey;
            gameState.currentQuestion = 0;
            gameState.answers = [];
            gameState.skipTyping = false;
            showQuestion();
        }

        // Show the current question
        function showQuestion() {
            const path = storyData.paths[gameState.currentPath];
            const question = path.questions[gameState.currentQuestion];
            const choices = path.choices[gameState.currentQuestion];
            
            // Get image path
            const imagePath = getImagePath(question.image);
            
            let html = `
                <button class="skip-btn" onclick="skipTyping()">Skip</button>
                <div class="scene-image">
                    <img src="${imagePath}" alt="${path.title}">
                </div>
                <div class="story-text" id="story-text"></div>
                <div class="choices" id="choices-container" style="display: none;">
            `;
            
            choices.forEach((choice, index) => {
                html += `
                    <button class="choice-btn" onclick="selectAnswer('${choice.value}')">
                        ${choice.text}
                    </button>
                `;
            });
            
            html += `</div>`;
            contentElement.innerHTML = html;
            
            // Type the text
            typeText(question.text, document.getElementById('story-text'), () => {
                document.getElementById('choices-container').style.display = 'flex';
            });
        }

        // Select an answer and proceed to next question or ending
        function selectAnswer(value) {
            gameState.answers.push(value);
            
            const path = storyData.paths[gameState.currentPath];
            
            if (gameState.currentQuestion < path.questions.length - 1) {
                // More questions to go
                gameState.currentQuestion++;
                gameState.skipTyping = false;
                showQuestion();
            } else {
                // All questions answered, show ending
                showEnding();
            }
        }

        // Show the ending based on answers
        function showEnding() {
            const path = storyData.paths[gameState.currentPath];
            
            // Calculate which ending based on answer distribution
            const answerCounts = { A: 0, B: 0, C: 0 };
            gameState.answers.forEach(answer => {
                answerCounts[answer]++;
            });
            
            // Determine the most common answer
            let maxCount = 0;
            let endingKey = 'A';
            
            for (const key in answerCounts) {
                if (answerCounts[key] > maxCount) {
                    maxCount = answerCounts[key];
                    endingKey = key;
                }
            }
            
            const ending = path.endings[endingKey];
            const imagePath = getImagePath(ending.image);
            
            let html = `
                <div class="scene-image">
                    <img src="${imagePath}" alt="${ending.title}">
                </div>
                <div class="ending-screen">
                    <div class="ending-title">${ending.title}</div>
                    <div class="ending-description">${ending.description}</div>
                    <div class="consequences">
                        <h3>Consequences:</h3>
                        <p>${ending.consequences}</p>
                    </div>
                    <button class="next-btn" onclick="showTheoreticalMessage()">Continue</button>
                </div>
            `;
            
            contentElement.innerHTML = html;
            gameState.gameCompleted = true;
        }

        // Type text animation
        function typeText(text, element, callback) {
            element.innerHTML = '';
            gameState.skipTyping = false;
            
            let i = 0;
            const timer = setInterval(() => {
                if (gameState.skipTyping) {
                    element.innerHTML = text;
                    clearInterval(timer);
                    if (callback) callback();
                    return;
                }
                
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                } else {
                    clearInterval(timer);
                    if (callback) callback();
                }
            }, gameState.typingSpeed);
        }

        // Skip typing animation
        function skipTyping() {
            gameState.skipTyping = true;
        }

        // Get image path from nested object
        function getImagePath(path) {
            const keys = path.split('.');
            let result = images;
            for (const key of keys) {
                result = result[key];
            }
            return result;
        }

        // Show theoretical message
        function showTheoreticalMessage() {
            let html = `
                <div class="theoretical-screen">
                    <h2>Theoretical Reflection</h2>
                    <p>This experience was guided by the principles of Ideological State Apparatuses (Althusser), where institutions reinforce dominant ideologies through cultural forms.</p>
                    <p>The MTRCB, as portrayed here, does not merely "classify" films. It classifies people, stories, and desires.</p>
                    <button class="next-btn" onclick="showCredits()">Continue</button>
                </div>
            `;
            contentElement.innerHTML = html;
        }

        // Show credits
        function showCredits() {
            let html = `
                <div class="credits-screen">
                    <h2>Credits</h2>
                    <p>Created for COMM 10: Introduction to Communication</p>
                    <p>University of the Philippines</p>
                    <p>Inspired by real cases of film classification in the Philippines</p>
                    <p>Link to an online copy of the concept paper!!</p>
                    <p>All opinions expressed are purely fictional and do not represent any real government body.</p>
                    <button class="next-btn" onclick="showFinalMessage()">Continue</button>
                </div>
            `;
            contentElement.innerHTML = html;
        }

        // Show final message
        function showFinalMessage() {
            let html = `
                <div class="final-message-screen">
                    <h2>Final Message</h2>
                    <p>Please do not rate this experience. We already know what you'll choose.</p>
                    <button class="restart-btn" onclick="restartGame()">Play Again</button>
                </div>
            `;
            contentElement.innerHTML = html;
        }

        // Restart the game
        function restartGame() {
            gameState = {
                currentPath: null,
                currentQuestion: 0,
                answers: [],
                gameCompleted: false,
                typingSpeed: 30,
                skipTyping: false
            };
            initGame();
        }

        // Initialize the game when page loads
        window.onload = initGame;
    </script>
</body>
</html>
